import{d as M,e as _,o as f,f as C,w as k,g as N,t as x,k as d,p as y,u as w,B as g,C as b,n as V,l as m}from"./vue.esm-bundler-b74e4d3a.js";import{S as E}from"./sw-base-field-d9725469.js";import{S as I,d as D}from"./sw-popover-deprecated-e707db58.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import"./tooltip.directive-5026512a.js";import"./sw-icon-08a29eac.js";import"./iframe-312174d1.js";import"../sb-preview/runtime.js";import"./index-76fb7be0.js";import"./_commonjsHelpers-de833af9.js";import"./_baseGetTag-22b9c805.js";import"./isObjectLike-e68f0fe0.js";const L=M({name:"SwColorpicker",components:{"sw-popover-deprecated":I,"sw-base-field":E},props:{value:{type:String,required:!1,default:""},label:{type:String,required:!1,default:null},helpText:{type:String,required:!1,default:null},colorOutput:{type:String,required:!1,default:"auto"},alpha:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},isInherited:{type:Boolean,required:!1,default:!1},isInheritanceField:{type:Boolean,required:!1,default:!1},disableInheritanceToggle:{type:Boolean,required:!1,default:!1},readonly:{type:Boolean,required:!1,default:!1},colorLabels:{type:Boolean,required:!1,default:!0},zIndex:{type:[Number,null],required:!1,default:null},error:{type:Object,required:!1,default:null},name:{type:String,required:!1,default:null}},data(){return{localValue:this.value,visible:!1,isDragging:!1,userInput:null,luminanceValue:50,saturationValue:50,hueValue:0,alphaValue:1,hasFocus:!1}},computed:{colorValue:{get(){return this.localValue},set(e){this.localValue=e,this.debounceEmitColorValue()}},integerAlpha:{get(){return Math.floor(this.alphaValue*100)},set(e){this.alphaValue=e/100}},sliderBackground(){return`linear-gradient(90deg, hsla(${this.hueValue}, ${this.saturationValue}%, ${this.luminanceValue}%, 0), hsl(${this.hueValue}, ${this.saturationValue}%, ${this.luminanceValue}%)), url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' width='100%25' height='100%25'%3E%3Crect width='10' height='10' x='00' y='00' fill='%23cdd5db' /%3E%3Crect width='10' height='10' x='10' y='10' fill='%23cdd5db' /%3E%3C/svg%3E")`},isColorValid(){return typeof this.colorValue=="string"?this.colorValue.startsWith("rgb")||this.colorValue.startsWith("hsl")||this.colorValue.startsWith("#"):this.colorValue.string.startsWith("rgb")||this.colorValue.string.startsWith("hsl")||this.colorValue.string.startsWith("#")},previewColorValue(){return this.isColorValid?typeof this.colorValue=="string"?this.colorValue:this.colorValue.string:"transparent"},selectorBackground(){return`hsl(${this.hueValue}, 100%, 50%)`},redValue:{get(){const e=this.convertHSLtoRGB(this.hueValue,this.saturationValue,this.luminanceValue,this.alphaValue);return Number(typeof e!="string"?e.red:e)},set(e){this.setSingleRGBValue(e,"red")}},greenValue:{get(){const e=this.convertHSLtoRGB(this.hueValue,this.saturationValue,this.luminanceValue,this.alphaValue);return Number(typeof e!="string"?e.green:e)},set(e){this.setSingleRGBValue(e,"green")}},blueValue:{get(){const e=this.convertHSLtoRGB(this.hueValue,this.saturationValue,this.luminanceValue,this.alphaValue);return Number(typeof e!="string"?e.blue:e)},set(e){this.setSingleRGBValue(e,"blue")}},rgbValue(){const e=this.convertHSLtoRGB(Math.abs(this.hueValue),Math.abs(this.saturationValue),Math.abs(this.luminanceValue),Math.abs(this.alphaValue));return typeof e!="string"?e.string:e},hslValue(){const e=Math.abs(Math.floor(this.hueValue)),l=Math.abs(Math.floor(this.saturationValue)),a=Math.abs(Math.floor(this.luminanceValue));if(this.alphaValue!==1){const t=Math.abs(Number(this.alphaValue.toFixed(2)));return`hsla(${e}, ${l}%, ${a}%, ${t})`}return`hsl(${e}, ${l}%, ${a}%)`},hexValue:{get(){return this.alphaValue<1?this.convertHSLtoHEX(this.hueValue,this.saturationValue,this.luminanceValue,this.alphaValue):this.convertHSLtoHEX(this.hueValue,this.saturationValue,this.luminanceValue)},set(e){const l=e;if(!/^#[0-9a-f]{3,8}/i.test(l))return;const t=this.convertHEXtoHSL(e);t!==!1&&this.setHslaValues(t.hue,t.saturation,t.luminance,t.alpha??this.alphaValue)}},convertedValue(){switch(this.colorOutput){case"auto":return this.alphaValue<1?this.rgbValue:this.hexValue;case"rgb":return this.rgbValue;case"hsl":return this.hslValue;case"hex":default:return this.hexValue}},selectorPositionX(){return`calc(${this.saturationValue}% - 9px)`},selectorPositionY(){return`calc(${Math.abs(this.luminanceValue-100)}% - 9px)`},selectorStyles(){return{backgroundColor:this.hslValue,top:this.selectorPositionY,left:this.selectorPositionX}}},watch:{value(){this.colorValue=this.value},hslValue(){this.colorValue=this.convertedValue},visible(e){if(!e)return;const l=this.colorValue;if((typeof l=="string"?l:l.string).startsWith("#")){const a=this.convertHEXtoHSL(typeof this.colorValue=="string"?this.colorValue:this.colorValue.string);if(!a)return;this.setHslaValues(a.hue,a.saturation,a.luminance,a.alpha)}else if((typeof l=="string"?l:l.string).startsWith("rgb")){const a=this.splitRGBValues(typeof this.colorValue=="string"?this.colorValue:this.colorValue.string),t=this.convertRGBtoHSL(a.red,a.green,a.blue);this.setHslaValues(t.hue,t.saturation,t.luminance,a.alpha)}else if((typeof l=="string"?l:l.string).startsWith("hsl")){const a=this.splitHSLValues(typeof this.colorValue=="string"?this.colorValue:this.colorValue.string);this.setHslaValues(a.hue,a.saturation,a.luminance,a.alpha)}}},beforeUnmount(){window.removeEventListener("mousedown",this.outsideClick)},methods:{debounceEmitColorValue:D(function(){this.$emit("input",this.colorValue)},50),outsideClick(e){/^sw-colorpicker__previewColor.active/.test(e.target._prevClass)||e.target.closest(".sw-colorpicker__colorpicker")!==null||(this.visible=!1,this.removeOutsideClickEvent())},setOutsideClickEvent(){window.addEventListener("mousedown",this.outsideClick)},removeOutsideClickEvent(){window.removeEventListener("mousedown",this.outsideClick)},toggleColorPicker(){if(!this.disabled){if(this.visible=!this.visible,this.visible){this.setOutsideClickEvent();return}this.removeOutsideClickEvent()}},moveSelector(e){if(!this.isDragging)return;const l=this.$refs.colorPicker.getBoundingClientRect(),a=e.clientX-l.left,t=e.clientY-l.top,s=a/l.width*100;let n;s>100?n=100:s<0?n=0:n=s;const u=(t/l.height-1)*-100;let c;u>100?c=100:u<0?c=0:c=u,this.saturationValue=Math.floor(n),this.luminanceValue=Math.floor(c)},setDragging(e){document.body.style.userSelect="none",this.isDragging=!0,this.moveSelector(e),window.addEventListener("mousemove",this.moveSelector,!1),window.addEventListener("mouseup",this.removeDragging,!1)},removeDragging(){document.body.style.userSelect=null,this.isDragging=!1,window.removeEventListener("mousemove",this.moveSelector),window.removeEventListener("mouseup",this.removeDragging)},setSingleRGBValue(e,l){if(!["red","green","blue"].includes(l))return;let t=null;e>255?t=255:e<0?t=0:t=e;const s=this.convertRGBtoHSL(l==="red"?t:this.redValue,l==="green"?t:this.greenValue,l==="blue"?t:this.blueValue);this.setHslaValues(s.hue,s.saturation,s.luminance,this.alphaValue)},setHslaValues(e,l,a,t){this.hueValue=e,this.luminanceValue=a,this.saturationValue=l,this.alphaValue=t||1},splitRGBValues(e){const l=e.slice(e.indexOf("(")+1,e.length-1).split(", "),a=Number(l[0]),t=Number(l[1]),s=Number(l[2]),n={red:a,green:t,blue:s};return e.includes("a")&&(n.alpha=Number(l[3])),n},splitHSLValues(e){const l=e.slice(e.indexOf("(")+1,e.length-1).split(", "),a=Number(l[0]),t=Number(l[1].slice(0,l[1].length-1)),s=Number(l[2].slice(0,l[2].length-1)),n=l[3]||Number(l[3])===0?Number(l[3]):void 0,u={hue:a,saturation:t,luminance:s};return n!==void 0&&(u.alpha=n),u},convertHSLtoRGB(e,l,a,t){const s={hue:e,saturation:l,luminance:a,alpha:t};return this.convertHSL("rgb",s)},convertHSLtoHEX(e,l,a,t){const s={hue:e,saturation:l,luminance:a,alpha:t};return this.convertHSL("hex",s)},convertHSL(e,l){if(!["hex","rgb"].includes(e))return{string:"",red:"",green:"",blue:""};let{hue:t,saturation:s,luminance:n,alpha:u}=l;s/=100,n/=100;const c=(1-Math.abs(2*n-1))*s,p=c*(1-Math.abs(t/60%2-1)),r=n-c/2;let o=0,i=0,h=0;if(t>=0&&t<60?(o=c,i=p,h=0):t>=60&&t<120?(o=p,i=c,h=0):t>=120&&t<180?(o=0,i=c,h=p):t>=180&&t<240?(o=0,i=p,h=c):t>=240&&t<300?(o=p,i=0,h=c):t>=300&&t<361&&(o=c,i=0,h=p),o=Math.round((o+r)*255),i=Math.round((i+r)*255),h=Math.round((h+r)*255),e==="hex")return o=o.toString(16),i=i.toString(16),h=h.toString(16),o.length===1&&(o=`0${o}`),i.length===1&&(i=`0${i}`),h.length===1&&(h=`0${h}`),u===void 0?`#${o}${i}${h}`:(u=Math.round(u*255).toString(16),u.length===1&&(u=`0${u}`),`#${o}${i}${h}${u}`);const v={string:`rgb(${o}, ${i}, ${h})`,red:typeof o=="string"?o:o.toString(),green:typeof i=="string"?i:i.toString(),blue:typeof h=="string"?h:h.toString(),alpha:void 0};return u!==1&&(v.string=`rgba(${o}, ${i}, ${h}, ${u})`,typeof u=="string"?v.alpha=u:u!==void 0?v.alpha=u.toString():v.alpha=u),v},convertRGBtoHSL(e,l,a){let t=e,s=l,n=a;t.toString().startsWith("-")&&(t=Math.abs(t)),n.toString().startsWith("-")&&(n=Math.abs(n)),s.toString().startsWith("-")&&(s=Math.abs(s)),t/=255,s/=255,n/=255;const u=Math.min(t,s,n),c=Math.max(t,s,n),p=c-u;let r=0,o=0,i=0;return p===0?r=0:c===t?r=(s-n)/p%6:c===s?r=(n-t)/p+2:r=(t-s)/p+4,r=Math.round(r*60),r<0&&(r+=360),i=(c+u)/2,o=p===0?0:p/(1-Math.abs(2*i-1)),o=+(o*100).toFixed(1),i=+(i*100).toFixed(1),{string:`hsl(${r},${o}%,${i}%)`,hue:r,saturation:o,luminance:i}},convertHEXtoHSL(e){const l=e;let a=0,t=0,s=0,n;if(l.length!==5&&l.length!==9&&l.length!==4&&l.length!==7)return!1;l.length===5?(a=`0x${l[1]}${l[1]}`,t=`0x${l[2]}${l[2]}`,s=`0x${l[3]}${l[3]}`,n=`0x${l[4]}${l[4]}`):l.length===9?(a=`0x${l[1]}${l[2]}`,t=`0x${l[3]}${l[4]}`,s=`0x${l[5]}${l[6]}`,n=`0x${l[7]}${l[8]}`):l.length===4?(a=`0x${l[1]}${l[1]}`,t=`0x${l[2]}${l[2]}`,s=`0x${l[3]}${l[3]}`):l.length===7&&(a=`0x${l[1]}${l[2]}`,t=`0x${l[3]}${l[4]}`,s=`0x${l[5]}${l[6]}`),a/=255,t/=255,s/=255;const u=Math.min(Number(a),Number(t),Number(s)),c=Math.max(Number(a),Number(t),Number(s)),p=c-u;let r=0,o=0,i=0;p===0?r=0:c===a?r=(Number(t)-Number(s))/p%6:c===t?r=(Number(s)-Number(a))/p+2:r=(Number(a)-Number(t))/p+4,r=Math.round(r*60),r<0&&(r+=360),i=(c+u)/2,o=p===0?0:p/(1-Math.abs(2*i-1)),o=+(o*100).toFixed(1),i=+(i*100).toFixed(1);const h={string:`hsl(${r}, ${o}%, ${i}%)`,hue:r,saturation:o,luminance:i,alpha:void 0};return h.string=`hsla(${r}, ${o}%, ${i}, ${n}%)`,n=Number((Number(n)/255).toFixed(2)),h.alpha=n,h},onClickInput(){this.readonly&&this.toggleColorPicker()},setFocusClass(){this.hasFocus=!0},removeFocusClass(){this.hasFocus=!1}}});const R=["aria-pressed"],G=["disabled","readonly"],T={class:"sw-colorpicker__colorpicker"},X={class:"sw-colorpicker__row"},O={class:"sw-colorpicker__sliders"},W={class:"sw-colorpicker__row sw-colorpicker__input-row"},z={class:"sw-colorpicker__row-column"},P={key:0,class:"sw-colorpicker__row-column-label"},U={class:"sw-colorpicker__row-column"},A={key:0,class:"sw-colorpicker__row-column-label"},Y={class:"sw-colorpicker__row-column"},j={key:0,class:"sw-colorpicker__row-column-label"},J={class:"sw-colorpicker__row-column"},K={key:0,class:"sw-colorpicker__row-column-label"},Q={key:0,class:"sw-colorpicker__row-column"},Z={key:0,class:"sw-colorpicker__row-column-label"};function ee(e,l,a,t,s,n){const u=_("sw-popover-deprecated"),c=_("sw-field-error"),p=_("sw-base-field");return f(),C(p,{class:"sw-colorpicker",disabled:e.disabled,required:e.required,"is-inherited":e.isInherited,"is-inheritance-field":e.isInheritanceField,"disable-inheritance-toggle":e.disableInheritanceToggle,"has-focus":e.hasFocus,"help-text":e.helpText,name:e.name},{label:k(()=>[N(x(e.label),1)]),"field-prefix":k(()=>[d("div",{class:"sw-colorpicker__previewWrapper",role:"button","aria-pressed":e.visible,"aria-label":"colorpicker-toggle",onClick:l[0]||(l[0]=(...r)=>e.toggleColorPicker&&e.toggleColorPicker(...r))},[d("div",{class:y(["sw-colorpicker__previewColor",{active:e.visible}]),style:w({background:e.previewColorValue})},null,6),d("div",{class:y(["sw-colorpicker__previewBackground",{"is--invalid":!e.isColorValid}])},null,2)],8,R)]),element:k(()=>[g(d("input",{"onUpdate:modelValue":l[1]||(l[1]=r=>e.colorValue=r),"aria-label":"colorpicker-color-value",class:"sw-colorpicker__input",spellcheck:"false",disabled:e.disabled,readonly:e.readonly,onClick:l[2]||(l[2]=(...r)=>e.onClickInput&&e.onClickInput(...r))},null,8,G),[[b,e.colorValue]]),e.visible?(f(),C(u,{key:0,class:"sw-colorpicker__colorpicker-position","z-index":e.zIndex},{default:k(()=>[d("div",T,[d("div",{ref:"colorPicker",class:"sw-colorpicker__colorpicker-selection",style:w({backgroundColor:e.selectorBackground}),onMousedown:l[3]||(l[3]=(...r)=>e.setDragging&&e.setDragging(...r))},[d("div",{class:"sw-colorpicker__colorpicker-selector",style:w(e.selectorStyles)},null,4)],36),d("div",X,[d("div",O,[g(d("input",{"onUpdate:modelValue":l[4]||(l[4]=r=>e.hueValue=r),"aria-label":"colorpicker-color-range",class:"sw-colorpicker__colorpicker-slider-range",type:"range",min:"0",max:"360",step:"1"},null,512),[[b,e.hueValue,void 0,{number:!0}]]),e.alpha?g((f(),V("input",{key:0,"onUpdate:modelValue":l[5]||(l[5]=r=>e.alphaValue=r),class:"sw-colorpicker__alpha-slider","aria-label":"colorpicker-alpha-range",type:"range",min:"0",max:"1",step:"0.01",style:w({backgroundImage:e.sliderBackground})},null,4)),[[b,e.alphaValue,void 0,{number:!0}]]):m("",!0)]),d("div",{class:y(["sw-colorpicker__colorpicker-wrapper",{"is--small":!e.alpha}])},[d("div",{class:"sw-colorpicker__colorpicker-previewColor",style:w({background:e.previewColorValue})},null,4),d("div",{class:y(["sw-colorpicker__colorpicker-previewBackground",{"is--invalid":!e.isColorValid}])},null,2)],2)]),d("div",W,[d("div",z,[g(d("input",{"onUpdate:modelValue":l[6]||(l[6]=r=>e.hexValue=r),class:"sw-colorpicker__colorpicker-input is--hex","aria-label":"hex-value",type:"text",spellcheck:"false"},null,512),[[b,e.hexValue,void 0,{lazy:!0}]]),e.colorLabels?(f(),V("label",P,"HEX")):m("",!0)]),d("div",U,[g(d("input",{"onUpdate:modelValue":l[7]||(l[7]=r=>e.redValue=r),class:"sw-colorpicker__colorpicker-input","aria-label":"red-value",type:"number",min:"0",max:"255",step:"1",placeholder:"0"},null,512),[[b,e.redValue,void 0,{number:!0}]]),e.colorLabels?(f(),V("label",A,"R")):m("",!0)]),d("div",Y,[g(d("input",{"onUpdate:modelValue":l[8]||(l[8]=r=>e.greenValue=r),class:"sw-colorpicker__colorpicker-input","aria-label":"green-value",type:"number",min:"0",max:"255",step:"1",placeholder:"0"},null,512),[[b,e.greenValue,void 0,{number:!0}]]),e.colorLabels?(f(),V("label",j,"G")):m("",!0)]),d("div",J,[g(d("input",{"onUpdate:modelValue":l[9]||(l[9]=r=>e.blueValue=r),class:"sw-colorpicker__colorpicker-input","aria-label":"blue-value",type:"number",min:"0",max:"255",step:"1",placeholder:"0"},null,512),[[b,e.blueValue,void 0,{number:!0}]]),e.colorLabels?(f(),V("label",K,"B")):m("",!0)]),e.alpha?(f(),V("div",Q,[g(d("input",{"onUpdate:modelValue":l[10]||(l[10]=r=>e.integerAlpha=r),class:"sw-colorpicker__colorpicker-input","aria-label":"alpha-value",type:"number",min:"0",max:"100",step:"1",placeholder:"0"},null,512),[[b,e.integerAlpha,void 0,{number:!0}]]),e.colorLabels?(f(),V("label",Z,"Alpha")):m("",!0)])):m("",!0)])])]),_:1},8,["z-index"])):m("",!0)]),error:k(()=>[e.error?(f(),C(c,{key:0,error:e.error},null,8,["error"])):m("",!0)]),_:1},8,["disabled","required","is-inherited","is-inheritance-field","disable-inheritance-toggle","has-focus","help-text","name"])}const S=F(L,[["render",ee]]);L.__docgenInfo={displayName:"SwColorpicker",exportName:"default",description:"",tags:{},props:[{name:"value",description:"The value of the colorpicker field.",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}},{name:"label",description:"A label for your text field. Usually used to guide the user what value this field controls.",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"helpText",description:"A text that helps the user to understand what this field does.",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"colorOutput",description:"Change the output value which gets emitted and shown in the field.",tags:{},values:["auto","hex","hsl","rgb"],type:{name:"string"},required:!1,defaultValue:{func:!1,value:"'auto'"}},{name:"alpha",description:"If activated then the color value can contain alpha values",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"disabled",description:"Determines if the field is disabled.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"required",description:"Determines if the field is required.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"isInherited",description:"Toggles the inheritance visualization.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"isInheritanceField",description:"Determines if the field is inheritable.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"disableInheritanceToggle",description:"Determines the active state of the inheritance toggle.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"readonly",description:"Determines if the field can be edited",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"colorLabels",description:"Toggle the labels above each field inside the colorpicker",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}},{name:"zIndex",type:{name:"number|null"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"error",description:"An error in your business logic related to this field.",tags:{example:[{description:'{"code": 500, "detail": "Error while saving"}',title:"example"}]},type:{name:"object"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"name",tags:{ignore:[{description:!0,title:"ignore"}]},type:{name:"string"},required:!1,defaultValue:{func:!1,value:"null"}}],events:[{name:"input",description:"Emits the selected color value",type:{names:["undefined"]},properties:[{type:{names:["string"]},name:"this",description:".colorValue the new color value"}]}],sourceFiles:["/home/runner/work/meteor-component-library/meteor-component-library/src/components/form/sw-colorpicker/sw-colorpicker.vue"]};const le={title:"Components/Form/sw-colorpicker",component:S,render:e=>({components:{SwColorpicker:S},template:'<sw-colorpicker v-bind="args"></sw-colorpicker>',setup:()=>({args:e})}),args:{label:"Colorpicker example",value:"#0fcff5",colorOutput:"auto",disabled:!1,readonly:!1,alpha:!0,colorLabels:!0,zIndex:null,helpText:"",required:!1,isInherited:!1,isInheritanceField:!1,disableInheritanceToggle:!1}},fe=le,$={name:"sw-colorpicker"};var q,B,H;$.parameters={...$.parameters,docs:{...(q=$.parameters)==null?void 0:q.docs,source:{originalSource:`{
  name: 'sw-colorpicker'
}`,...(H=(B=$.parameters)==null?void 0:B.docs)==null?void 0:H.source}}};const me=["DefaultStory"];export{$ as DefaultStory,me as __namedExportsOrder,fe as default};
