import{d as G,e as U,o as I,f as C,w as y,g as _,t as $,k as V,q as X,j as Z,l as J}from"./vue.esm-bundler-651c6785.js";import{S as K}from"./sw-text-field-00c756be.js";import{S as Q}from"./sw-icon-682d28c1.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import{b as ee}from"./arg-types-d031e4ef.js";import"./sw-base-field-b77ca833.js";import"./tooltip.directive-5026512a.js";import"./index-76fb7be0.js";import"./_commonjsHelpers-de833af9.js";import"./sw-field-error-eb878b94.js";import"./iframe-4e8d603d.js";import"../sb-preview/runtime.js";const g=2147483647,f=36,A=1,x=26,te=38,re=700,E=72,B=128,M="-",ne=/^xn--/,se=/[^\0-\x7F]/,ie=/[\x2E\u3002\uFF0E\uFF61]/g,le={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=f-A,d=Math.floor,F=String.fromCharCode;function m(e){throw new RangeError(le[e])}function oe(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function N(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(ie,".");const s=e.split("."),o=oe(s,t).join(".");return r+o}function z(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const o=e.charCodeAt(n++);(o&64512)==56320?t.push(((s&1023)<<10)+(o&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}const ae=e=>String.fromCodePoint(...e),ue=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:f},L=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},P=function(e,t,n){let r=0;for(e=n?d(e/re):e>>1,e+=d(e/t);e>T*x>>1;r+=f)e=d(e/T);return d(r+(T+1)*e/(e+te))},H=function(e){const t=[],n=e.length;let r=0,s=B,o=E,c=e.lastIndexOf(M);c<0&&(c=0);for(let a=0;a<c;++a)e.charCodeAt(a)>=128&&m("not-basic"),t.push(e.charCodeAt(a));for(let a=c>0?c+1:0;a<n;){const u=r;for(let i=1,p=f;;p+=f){a>=n&&m("invalid-input");const h=ue(e.charCodeAt(a++));h>=f&&m("invalid-input"),h>d((g-r)/i)&&m("overflow"),r+=h*i;const v=p<=o?A:p>=o+x?x:p-o;if(h<v)break;const b=f-v;i>d(g/b)&&m("overflow"),i*=b}const l=t.length+1;o=P(r-u,l,u==0),d(r/l)>g-s&&m("overflow"),s+=d(r/l),r%=l,t.splice(r++,0,s)}return String.fromCodePoint(...t)},j=function(e){const t=[];e=z(e);const n=e.length;let r=B,s=0,o=E;for(const u of e)u<128&&t.push(F(u));const c=t.length;let a=c;for(c&&t.push(M);a<n;){let u=g;for(const i of e)i>=r&&i<u&&(u=i);const l=a+1;u-r>d((g-s)/l)&&m("overflow"),s+=(u-r)*l,r=u;for(const i of e)if(i<r&&++s>g&&m("overflow"),i===r){let p=s;for(let h=f;;h+=f){const v=h<=o?A:h>=o+x?x:h-o;if(p<v)break;const b=p-v,q=f-v;t.push(F(L(v+b%q,0))),p=d(b/q)}t.push(F(L(p,0))),o=P(s,l,a===c),s=0,++a}++s,++r}return t.join("")},ce=function(e){return N(e,function(t){return ne.test(t)?H(t.slice(4).toLowerCase()):t})},fe=function(e){return N(e,function(t){return se.test(t)?"xn--"+j(t):t})},de={version:"2.3.1",ucs2:{decode:z,encode:ae},decode:H,encode:j,toASCII:fe,toUnicode:ce};function pe(e){if(!e)return"";const t=de.toUnicode(e);return decodeURI(t)}const w={PROTOCOL:/([a-zA-Z0-9]+:\/\/)+/,PROTOCOL_HTTP:/^https?:\/\//,SSL:/^\s*https:\/\//,TRAILING_SLASH:/\/+$/},W=G({name:"SwUrlField",components:{"sw-icon":Q},filters:{unicodeUri:pe},extends:K,inheritAttrs:!1,props:{omitUrlHash:{type:Boolean,default:!1},omitUrlSearch:{type:Boolean,default:!1}},data(){return{sslActive:!0,currentValue:this.value||"",errorUrl:null,currentDebounce:null}},computed:{prefixClass(){return this.sslActive?"is--ssl":""},urlPrefix(){return this.sslActive?"https://":"http://"},url(){const e=this.currentValue.trim();return e===""?"":`${this.urlPrefix}${e}`},combinedError(){return this.errorUrl??this.error}},watch:{value(){this.checkInput(this.value||"")}},created(){this.createdComponent()},methods:{createdComponent(){this.checkInput(this.currentValue)},onBlur(e){this.checkInput(e.target.value)},checkInput(e){if(this.errorUrl=null,!e.length){this.handleEmptyUrl();return}e.match(w.PROTOCOL_HTTP)&&(this.sslActive=this.getSSLMode(e));const t=this.validateCurrentValue(e);t?(this.currentValue=t,this.$emit("input",this.url)):this.setInvalidUrlError()},handleEmptyUrl(){this.currentValue="",this.$emit("input","")},validateCurrentValue(e){const t=this.getURLInstance(e);if(!t)return null;this.omitUrlSearch&&(t.search=""),this.omitUrlHash&&(t.hash="");const n=t.hash===""&&t.search===""?w.TRAILING_SLASH:"";return t.toString().replace(w.PROTOCOL,"").replace(n,"").replace(t.host,this.$options.filters.unicodeUri(t.host))},changeMode(e){e||(this.sslActive=!this.sslActive,this.$emit("input",this.url))},getURLInstance(e){try{const t=e.match(w.PROTOCOL)?e:`${this.urlPrefix}${e}`;return new URL(t)}catch{return this.setInvalidUrlError(),null}},getSSLMode(e){return!!e.match(w.SSL)},setInvalidUrlError(){console.error({code:"INVALID_URL"})}}});const he={"aria-describedby":"url-prefix"},me=["id","name","value","placeholder","disabled"];function ve(e,t,n,r,s,o){const c=U("sw-icon"),a=U("sw-field-error"),u=U("sw-base-field");return I(),C(u,{class:"sw-field--url",disabled:e.disabled,required:e.required,"is-inherited":e.isInherited,"is-inheritance-field":e.isInheritanceField,"disable-inheritance-toggle":e.disableInheritanceToggle,copyable:e.copyable,"copyable-tooltip":e.copyableTooltip,"copyable-text":e.url,"has-focus":e.hasFocus,"help-text":e.helpText,name:e.name,size:e.size,onInheritanceRestore:t[4]||(t[4]=l=>e.$emit("inheritance-restore",l)),onInheritanceRemove:t[5]||(t[5]=l=>e.$emit("inheritance-remove",l))},{label:y(()=>[_($(e.label),1)]),"field-prefix":y(()=>[V("span",{class:X(["sw-field__url-input__prefix",e.prefixClass]),"aria-describedby":"ssl-switch",role:"button",onClick:t[0]||(t[0]=l=>e.changeMode(e.disabled))},[e.sslActive?(I(),C(c,{key:0,name:"regular-lock",small:!0})):(I(),C(c,{key:1,name:"regular-lock-open",small:!0})),V("span",he,$(e.urlPrefix),1)],2)]),element:y(({identification:l})=>[V("input",{id:l,type:"url",class:"sw-url-input-field__input",name:l,value:e.currentValue|e.unicodeUri,placeholder:e.placeholder,disabled:e.disabled,onInput:t[1]||(t[1]=(...i)=>e.onInput&&e.onInput(...i)),onFocus:t[2]||(t[2]=(...i)=>e.setFocusClass&&e.setFocusClass(...i)),onBlur:t[3]||(t[3]=i=>{e.onBlur(i),e.removeFocusClass()})},null,40,me)]),"field-suffix":y(()=>[Z(e.$slots,"suffix")]),error:y(()=>[e.error?(I(),C(a,{key:0,error:e.error},null,8,["error"])):J("",!0)]),_:3},8,["disabled","required","is-inherited","is-inheritance-field","disable-inheritance-toggle","copyable","copyable-tooltip","copyable-text","has-focus","help-text","name","size"])}const R=Y(W,[["render",ve]]);W.__docgenInfo={displayName:"SwUrlField",exportName:"default",description:"",tags:{},props:[{name:"value",description:"The value of the text field.",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}},{name:"placeholder",description:"A placeholder text being displayed if no value is set.",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}},{name:"label",description:"A label for your text field. Usually used to guide the user what value this field controls.",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"helpText",description:"A text that helps the user to understand what this field does.",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"size",description:"The size of the text field.",tags:{},values:["small","default"],type:{name:"string"},required:!1,defaultValue:{func:!1,value:"'default'"}},{name:"copyable",description:"Toggles the copy function of the text field.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"copyableTooltip",description:"If set to true the tooltip will change on successful copy.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"error",description:"An error in your business logic related to this field.",tags:{example:[{description:'{"code": 500, "detail": "Error while saving"}',title:"example"}]},type:{name:"object"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"disabled",description:"Determines if the field is disabled.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"required",description:"Determines if the field is required.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"isInherited",description:"Toggles the inheritance visualization.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"isInheritanceField",description:"Determines if the field is inheritable.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"disableInheritanceToggle",description:"Determines the active state of the inheritance toggle.",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"idSuffix",tags:{ignore:[{description:!0,title:"ignore"}]},type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}},{name:"name",tags:{ignore:[{description:!0,title:"ignore"}]},type:{name:"string"},required:!1,defaultValue:{func:!1,value:"null"}},{name:"omitUrlHash",description:"If set to true then all url hashes will be removed",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"omitUrlSearch",description:"If set to true then all query parameters will be removed",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"inheritance-restore"},{name:"inheritance-remove"},{name:"change",type:{names:["undefined"]}},{name:"input",type:{names:["undefined"]}}],slots:[{name:"suffix"},{name:"prefix"},{name:"hint"}],sourceFiles:["/home/runner/work/meteor-component-library/meteor-component-library/src/components/form/sw-text-field/sw-text-field.vue","/home/runner/work/meteor-component-library/meteor-component-library/src/components/form/sw-url-field/sw-url-field.vue"]};const ge={title:"Components/Form/sw-url-field",component:R,render:e=>({components:{SwUrlField:R},template:`<div>
        <sw-url-field
          v-bind="args"
          :value="currentValue"
          @change="change"
          @input="input"
          @inheritance-restore="inheritanceRestoreWrapper"
          @inheritance-remove="inheritanceRemoveWrapper">
          <template
            v-if="$props.prefix"
            #prefix>
            {{ $props.prefix }}
          </template>
          <template
            v-if="$props.suffix"
            #suffix>
            {{ $props.suffix }}
          </template>
          <template
            v-if="$props.hint"
            #hint>
            {{ $props.hint }}
          </template>
        </sw-url-field>
  
        <h4 style="display: none;">hidden</h4>
      </div>`,data(){return{currentValue:""}},watch:{value(t){this.currentValue=t}},created(){this.currentValue=this.value},methods:{inheritanceRemoveWrapper(t){this.inheritanceRemove(...t),this.isInherited=!1},inheritanceRestoreWrapper(t){this.inheritanceRestore(...t),this.isInherited=!0}},setup:()=>({args:e})}),args:{label:"Url field",size:"default"},argTypes:{...ee}},qe=ge,S={name:"sw-url-field"};var k,O,D;S.parameters={...S.parameters,docs:{...(k=S.parameters)==null?void 0:k.docs,source:{originalSource:`{
  name: 'sw-url-field'
}`,...(D=(O=S.parameters)==null?void 0:O.docs)==null?void 0:D.source}}};const $e=["DefaultStory"];export{S as DefaultStory,$e as __namedExportsOrder,qe as default};
