import{d as k,e as l,o as n,f as m,w as f,k as I,q as u,u as R,p as o,F as c,z as p,v as b,g as w,t as g,l as h}from"./vue.esm-bundler-651c6785.js";import{S as q,a as N}from"./sw-context-menu-item-72f6bb5c.js";import{S as W}from"./sw-color-badge-009d7ca8.js";import{S as T}from"./sw-icon-2d70ae29.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";function _(e){const t=window.getComputedStyle(e),i=parseFloat(t.marginLeft)+parseFloat(t.marginRight);return Math.ceil(e.offsetWidth+i)}const C=k({name:"PriorityPlusMenu",props:{list:{type:Array,required:!0,default(){return[]}},offsetFactor:{type:Number,default:2},identifier:{type:String,required:!1,default:"name"}},data(){return{accumItemWidths:[],hiddenItemIdentifiers:[]}},computed:{mainItems(){return this.list.filter(e=>!this.hiddenItemIdentifiers.includes(e.name))},moreItems(){return this.list.filter(e=>this.hiddenItemIdentifiers.includes(e.name))},hasHiddenItems(){return!!this.moreItems.length},visibleElements(){const e={};return this.list.forEach(t=>{if(this.hiddenItemIdentifiers.includes(t[this.identifier]))return;const i=this.$el.parentElement.querySelector(`[data-priority-plus="${t[this.identifier]}"]`);i&&(e[t[this.identifier]]=i)}),e},lastVisibleElement(){const e=Object.keys(this.visibleElements),t=e[e.length-1];return this.visibleElements[t]}},async mounted(){await this.$nextTick(),this.storeItemWidths(),this.handleResize(),this.handleResize(),window.addEventListener("resize",this.handleResize)},watch:{list:{handler(){this.handleResize()},deep:!0}},beforeUnmount(){window.removeEventListener("resize",this.handleResize)},methods:{storeItemWidths(){let e=0;this.list.forEach((t,i)=>{e+=_(this.visibleElements[t[this.identifier]]),this.accumItemWidths[i]=e})},getContainerWidth(){let e=0;return this.hasHiddenItems&&(e=_(this.lastVisibleElement)*this.offsetFactor),this.$el.parentElement.offsetWidth-e},getLastVisibleItemIndex(){let e=0;const t=this.getContainerWidth();for(;e<this.accumItemWidths.length;){if(this.accumItemWidths[e]>t){e--;break}e++}return e},async handleResize(){await this.$nextTick();const e=this.getLastVisibleItemIndex();this.hiddenItemIdentifiers=[],this.list.forEach((t,i)=>{if(!(i>e)){this.hiddenItemIdentifiers=this.hiddenItemIdentifiers.filter(y=>y!==t.name);return}this.hiddenItemIdentifiers.push(t.name)})}},render(){return this.$slots.default({mainItems:this.mainItems,moreItems:this.moreItems})}});C.__docgenInfo={displayName:"PriorityPlusMenu",description:`A flexible priority plus navigation component.
For reference see: https://css-tricks.com/the-priority-navigation-pattern/`,tags:{examples:[{title:"example",content:`<sw-priority-plus-navigation
 :list="[
    { name: 'Home', url: '/' },
    { name: 'About', url: '/about' },
  ]"
  identifier="name"
  #default="{ mainItems, moreItems }"
>
  <template v-for="item in mainItems">
     <a
       :href="item.url"
       :data-priority-plus="item.name"
     >
       {{ item.name }}
     </a>
  </template>

  <sw-context-button
    v-if="moreItems.length"
    ref="more-items-button"
    :has-error="moreItems.some(i => i.hasError)"
  >
    <template #button-text>More</template>

    <sw-context-menu-item
     v-for="item in moreItems"
    >
    </sw-context-menu-item>
  </sw-context-button>
</sw-priority-plus-navigation>`}]},exportName:"default",props:[{name:"list",description:"The list of navigation items to display.",type:{name:"ItemBase[]"},required:!0,defaultValue:{func:!0,value:"function() { return [] }"}},{name:"offsetFactor",description:"The offset factor is used to multiply the width of the last visible item for the more button offset.",type:{name:"number"},defaultValue:{func:!1,value:"2.0"}},{name:"identifier",description:"The property used to identify the items in the list.",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"'name'"}}],slots:[{name:"default",bindings:[]}],sourceFiles:["/home/runner/work/meteor-component-library/meteor-component-library/src/components/_internal/sw-priority-plus-navigation.vue"]};const $=k({name:"SwTabs",components:{"sw-context-button":q,"sw-context-menu-item":N,"priority-plus":C,"sw-color-badge":W,"sw-icon":T},props:{items:{type:Array,required:!0},vertical:{type:Boolean,required:!1,default:!1},small:{type:Boolean,required:!1,default:!1},defaultItem:{type:String,required:!1,default:""}},data(){return{refreshKey:!0,activeItemName:"",showMoreItems:!1}},computed:{tabClasses(){return this.refreshKey,{"sw-tabs--vertical":this.vertical,"sw-tabs--small":this.small}},activeDomItem(){this.refreshKey;const e=this.activeItemName;return(this.$refs.items?this.$refs.items:[]).find(r=>r.getAttribute("data-item-name")===e)},sliderPosition(){var e,t,i,r;return this.refreshKey,!this.activeDomItem&&!this.activeItem?0:(e=this.activeItem)!=null&&e.hidden&&this.$refs["more-items-button"]?(t=this.$refs["more-items-button"].$el)==null?void 0:t.offsetLeft:this.vertical?(i=this.activeDomItem)==null?void 0:i.offsetTop:(r=this.activeDomItem)==null?void 0:r.offsetLeft},sliderLength(){var e,t,i,r;return this.refreshKey,!this.activeDomItem&&!this.activeItem?0:(e=this.activeItem)!=null&&e.hidden&&this.$refs["more-items-button"]?(t=this.$refs["more-items-button"].$el)==null?void 0:t.offsetWidth:this.vertical?(i=this.activeDomItem)==null?void 0:i.offsetHeight:(r=this.activeDomItem)==null?void 0:r.offsetWidth},activeItem(){return this.refreshKey,this.items.find(e=>e.name===this.activeItemName)},sliderClasses(){var e;return this.refreshKey,{"sw-tabs--slider__has-error":((e=this.activeItem)==null?void 0:e.hasError)??!1}},sliderStyle(){return this.refreshKey,this.vertical?`
            transform: translate(0, ${this.sliderPosition}px) rotate(90deg);
            width: ${this.sliderLength}px;
        `:`
          transform: translate(${this.sliderPosition}px, 0) rotate(0deg);
          width: ${this.sliderLength}px;
      `}},watch:{items:"handleResize",vertical:"handleResize",small:"handleResize"},mounted(){this.setActiveItem(this.defaultItem),this.$device.onResize({listener(){this.handleResize()},component:this,scope:this})},beforeUnmount(){this.$device.removeResizeListener(this)},methods:{handleClick(e){this.setActiveItem(e),this.$emit("new-item-active",e);const t=this.items.find(i=>i.name===e);t!=null&&t.onClick&&t.onClick(e)},getItemClasses(e){return{"sw-tabs--item__has-error":e.hasError,"sw-tabs--item__is-active":e.name===this.activeItemName}},getContextMenuItemVariant(e){return e.hasError?"critical":e.name===this.activeItemName?"active":e.badge==="critical"?"critical":"default"},setActiveItem(e){this.activeItemName=`${e}`,this.refreshKey=!this.refreshKey},handleResize(){this.$refs.priorityPlus&&(this.refreshKey=!this.refreshKey,this.$refs.priorityPlus.handleResize().then(()=>{this.refreshKey=!this.refreshKey}))},toggleMoreTabItems(){this.showMoreItems=!this.showMoreItems}}});const M=["data-priority-plus","data-item-name","aria-selected","onClick","onKeyup"],D=["data-item-name","onClick"];function F(e,t,i,r,y,P){const x=l("sw-icon"),E=l("sw-color-badge"),K=l("sw-context-menu-item"),z=l("sw-context-button"),S=l("priority-plus");return n(),m(S,{ref:"priorityPlus",list:e.items},{default:f(({mainItems:v,moreItems:d})=>[I("ul",{class:u(["sw-tabs",e.tabClasses]),role:"tablist"},[I("span",{class:u(["sw-tabs--slider",e.sliderClasses]),style:R(e.sliderStyle)},null,6),e.vertical?h("",!0):(n(),o(c,{key:0},[(n(!0),o(c,null,p(v,s=>(n(),o("li",{key:s.name,"data-priority-plus":s.name,ref_for:!0,ref:"items",class:u(["sw-tabs--item",e.getItemClasses(s)]),"data-item-name":s.name,role:"tab","aria-selected":s.name===e.activeItemName,tabindex:0,onClick:a=>e.handleClick(s.name),onKeyup:b(a=>e.handleClick(s.name),["enter"])},[w(g(s.label)+" ",1),s.hasError?(n(),m(x,{key:0,class:"sw-tabs--error-badge",name:"solid-exclamation-circle"})):h("",!0),s.badge?(n(),m(E,{key:1,variant:s.badge,rounded:""},null,8,["variant"])):h("",!0)],42,M))),128)),d.length?(n(),m(z,{key:0,ref:"more-items-button","has-error":d.some(s=>s.hasError)},{"button-text":f(()=>[w(" More ")]),default:f(({toggleFloatingUi:s})=>[(n(!0),o(c,null,p(d,a=>(n(),m(K,{key:a.name,type:e.getContextMenuItemVariant(a),role:"tab","aria-selected":a.name===e.activeItemName,label:a.label,onClick:V=>{e.handleClick(a.name),s()},onKeyup:b(V=>e.handleClick(a.name),["enter"])},null,8,["type","aria-selected","label","onClick","onKeyup"]))),128))]),_:2},1032,["has-error"])):h("",!0)],64)),e.vertical?(n(!0),o(c,{key:1},p([...v,...d],s=>(n(),o("li",{key:s.name,ref_for:!0,ref:"items",class:u(["sw-tabs--item",e.getItemClasses(s)]),"data-item-name":s.name,onClick:a=>e.handleClick(s.name)},g(s.label),11,D))),128)):h("",!0)],2)]),_:1},8,["list"])}const O=L($,[["render",F]]);$.__docgenInfo={displayName:"SwTabs",exportName:"default",description:"",tags:{},props:[{name:"items",type:{name:"TabItem[]"},required:!0},{name:"vertical",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"small",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"defaultItem",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}}],events:[{name:"new-item-active",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/meteor-component-library/meteor-component-library/src/components/navigation/sw-tabs/sw-tabs.vue"]};export{O as S};
