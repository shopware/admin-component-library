var D=Object.defineProperty;var M=(i,t,e)=>t in i?D(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var o=(i,t,e)=>(M(i,typeof t!="symbol"?t+"":t,e),e);function O(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,i=>(i^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>i/4).toString(16))}function w(){return O().replace(/-/g,"")}const f=["top","right","bottom","left"],c=new Map;class h{constructor({id:t=w(),placement:e="top",message:s,width:l=200,element:n,showDelay:a=100,hideDelay:r=a,disabled:p=!1,appearance:d="dark",showOnDisabledElements:_=!1,zIndex:m=null}){o(this,"_id");o(this,"_placement");o(this,"_message");o(this,"_width");o(this,"_parentDOMElement");o(this,"_showDelay");o(this,"_hideDelay");o(this,"_disabled");o(this,"_appearance");o(this,"_showOnDisabledElements");o(this,"_zIndex");o(this,"_isShown");o(this,"_state");o(this,"_DOMElement");o(this,"_parentDOMElementWrapper");o(this,"_actualTooltipPlacement");o(this,"_timeout");this._id=t,this._placement=h.validatePlacement(e),this._message=h.validateMessage(s),this._width=h.validateWidth(l),this._parentDOMElement=n,this._showDelay=a??100,this._hideDelay=r??100,this._disabled=p,this._appearance=d,this._showOnDisabledElements=_,this._zIndex=m,this._isShown=!1,this._state=!1,this._DOMElement=null,this._parentDOMElementWrapper=null,this._actualTooltipPlacement=null}get id(){return this._id}init(){this._DOMElement=this.createDOMElement(),this._showOnDisabledElements&&(this._parentDOMElementWrapper=this.createParentDOMElementWrapper()),this.registerEvents()}update({message:t,placement:e,width:s,showDelay:l,hideDelay:n,disabled:a,appearance:r,showOnDisabledElements:p,zIndex:d}){t&&this._message!==t&&(this._message=h.validateMessage(t),this._DOMElement&&(this._DOMElement.innerHTML=this._message),this.registerEvents()),s&&this._width!==s&&(this._width=h.validateWidth(s),this._DOMElement.style.width=`${this._width}px`),e&&this._placement!==e&&(this._placement=h.validatePlacement(e),this._placeTooltip()),l&&this._showDelay!==l&&(this._showDelay=l),n&&this._hideDelay!==n&&(this._hideDelay=n),a!==void 0&&this._disabled!==a&&(this._disabled=a),r&&this._appearance!==r&&(this._DOMElement.classList.remove(`sw-tooltip--${this._appearance}`),this._appearance=r,this._DOMElement.classList.add(`sw-tooltip--${this._appearance}`)),p!==void 0&&this._showOnDisabledElements!==p&&(this._showOnDisabledElements=p),d!==this._zIndex&&d!==void 0&&(this._zIndex=d)}createParentDOMElementWrapper(){const t=document.createElement("div");return t.classList.add("sw-tooltip--wrapper"),this._parentDOMElement.parentNode.insertBefore(t,this._parentDOMElement),t.appendChild(this._parentDOMElement),t}createDOMElement(){const t=document.createElement("div");return t.innerHTML=this._message,t.style.width=`${this._width}px`,t.setAttribute("aria-hidden","false"),t.classList.add("sw-tooltip"),t.classList.add(`sw-tooltip--${this._appearance}`),this._zIndex!==null&&(t.style.zIndex=this._zIndex.toFixed(0)),t}registerEvents(){this._parentDOMElementWrapper?(this._parentDOMElementWrapper.addEventListener("mouseenter",this.onMouseToggle.bind(this)),this._parentDOMElementWrapper.addEventListener("mouseleave",this.onMouseToggle.bind(this))):(this._parentDOMElement.addEventListener("mouseenter",this.onMouseToggle.bind(this)),this._parentDOMElement.addEventListener("mouseleave",this.onMouseToggle.bind(this))),this._DOMElement.addEventListener("mouseenter",this.onMouseToggle.bind(this)),this._DOMElement.addEventListener("mouseleave",this.onMouseToggle.bind(this))}onMouseToggle(t){this._state=t.type==="mouseenter",this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._toggle.bind(this),this._state?this._showDelay:this._hideDelay)}_toggle(){if(this._state&&!this._isShown&&this._doesParentExist()){this.showTooltip();return}!this._state&&this._isShown&&this.hideTooltip()}_doesParentExist(){const t=this._parentDOMElement.getAttribute("tooltip-id")??"",e=this._parentDOMElement.tagName.toLowerCase();return!!document.querySelector(`${e}[tooltip-id="${t}"]`)}showTooltip(){this._disabled||(document.body.appendChild(this._DOMElement),this._placeTooltip(),this._isShown=!0)}hideTooltip(){this._disabled||(this._DOMElement.remove(),this._isShown=!1)}_placeTooltip(){let t=f,e=this._placement;for(t=t.filter(s=>s!==e),this._DOMElement.classList.remove(`sw-tooltip--${this._actualTooltipPlacement}`),this._setDOMElementPosition(this._calculateTooltipPosition(e??"top")),this._actualTooltipPlacement=e??null;!this._isElementInViewport(this._DOMElement);){if(t.length<1){this._actualTooltipPlacement=this._placement??null,this._setDOMElementPosition(this._calculateTooltipPosition(this._placement??"top"));break}e=t.shift(),this._setDOMElementPosition(this._calculateTooltipPosition(e??"top")),this._actualTooltipPlacement=e??null}this._DOMElement.classList.add(`sw-tooltip--${this._actualTooltipPlacement??""}`)}_setDOMElementPosition({top:t,left:e}){this._DOMElement.style.top=t,this._DOMElement.style.left=e}_calculateTooltipPosition(t){const e=this._parentDOMElement.getBoundingClientRect(),s=10;let l,n;switch(t){case"bottom":l=`${e.top+e.height+s}px`,n=`${e.left+e.width/2-this._DOMElement.offsetWidth/2}px`;break;case"left":l=`${e.top+e.height/2-this._DOMElement.offsetHeight/2}px`,n=`${e.left-s-this._DOMElement.offsetWidth}px`;break;case"right":l=`${e.top+e.height/2-this._DOMElement.offsetHeight/2}px`,n=`${e.right+s}px`;break;case"top":default:l=`${e.top-this._DOMElement.offsetHeight-s}px`,n=`${e.left+e.width/2-this._DOMElement.offsetWidth/2}px`}return{top:l,left:n}}_isElementInViewport(t){const e=t.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight,l=window.innerWidth||document.documentElement.clientWidth,n={top:e.top>0,right:e.right<l,bottom:e.bottom<s,left:e.left>0};return n.top&&n.right&&n.bottom&&n.left}static validatePlacement(t){return f.includes(t)?t:(console.warn("Tooltip Directive",`The modifier has to be one of these "${f.join(",")}"`),"top")}static validateMessage(t){return typeof t!="string"&&console.warn("Tooltip Directive","The tooltip needs a message with type string"),t??""}static validateWidth(t){return t==="auto"?t:typeof t!="number"||t<1?(console.warn("Tooltip Directive","The tooltip width has to be a number greater 0"),200):t}static validateDelay(t){return typeof t!="number"||t<1?(console.warn("Tooltip Directive","The tooltip delay has to be a number greater 0"),100):t}}function E(i,{value:t,modifiers:e}){let s=typeof t=="string"?t:t.message;s=s?s.trim():"";const l=t.position||Object.keys(e)[0],n=t.showDelay,a=t.hideDelay,r=t.disabled,p=t.appearance,d=t.width,_=t.showOnDisabledElements,m=t.zIndex,g={element:i,message:s,placement:l,width:d,showDelay:n,hideDelay:a,disabled:r,appearance:p,showOnDisabledElements:_,zIndex:m};if(i.hasAttribute("tooltip-id")){c.get(i.getAttribute("tooltip-id")).update(g);return}const u=new h(g);c.set(u.id??"",u),i.setAttribute("tooltip-id",u.id)}const v={beforeMount:(i,t)=>{E(i,t)},unmounted:i=>{i.hasAttribute("tooltip-id")&&c.get(i.getAttribute("tooltip-id")).hideTooltip()},updated:(i,t)=>{E(i,t)},mounted:i=>{i.hasAttribute("tooltip-id")&&c.get(i.getAttribute("tooltip-id")).init()}};export{v as T,w as c};
